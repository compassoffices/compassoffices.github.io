<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Data Form</title>
    <link rel="icon" type="image/png" href="https://www.compassoffices.com/wp-content/uploads/2025/09/compassoffices-logo-web-2025_icon-o-scaled.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        .form-container {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            min-height: 100vh;
            padding: 1rem;
        }
        
        .form-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid #ff6600;
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
            background: white;
            width: 100%;
            box-sizing: border-box;
        }
        
        .input-field:focus {
            border-color: #ff6600;
            box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.1);
            transform: translateY(-1px);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #ff6600 0%, #e55a00 100%);
            transition: all 0.3s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(255, 102, 0, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .success-message {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .error-message {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .form-container {
                padding: 0.5rem;
            }
            
            .form-card {
                padding: 1.5rem;
            }
            
            .grid-cols-1 {
                grid-template-columns: 1fr;
            }
            
            .grid-cols-2 {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .input-field {
                padding: 0.75rem 1rem;
                font-size: 1rem;
            }
            
            .space-y-6 > * + * {
                margin-top: 1.5rem;
            }
            
            .max-w-2xl {
                max-width: 100%;
                padding: 0 0.5rem;
            }
            
            .text-4xl {
                font-size: 1.875rem;
                line-height: 2.25rem;
            }
            
            .text-lg {
                font-size: 1rem;
            }
            
            .h-16 {
                height: 3rem;
            }
            
            .submit-btn {
                padding: 0.75rem 1rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body class="form-container">
    <div class="min-h-full py-8 px-4">
        <div class="max-w-2xl mx-auto">
            <!-- Logo Header -->
            <div class="text-center mb-8">
                <div class="mb-6">
                    <img src="https://www.compassoffices.com/wp-content/themes/compass-offices/assets/images/compassoffices-logo-web-all-in-one-2025_ow.svg" 
                         alt="Compass Offices Logo" 
                         class="h-16 mx-auto"
                         onerror="this.style.display='none';">
                </div>
                <h1 class="text-4xl font-bold text-white mb-2">Event Registration</h1>
                <p class="text-white/80 text-lg">Fill in the details for the new event</p>
            </div>
            
            <!-- Form Card -->
            <div class="form-card rounded-2xl p-8">
                <form id="eventForm" class="space-y-6">
                    <!-- Time and Date Row -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Time</label>
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label for="startTime" class="block text-xs font-medium text-gray-600 mb-1">Start Time</label>
                                    <input type="time" id="startTime" name="startTime" required
                                           class="input-field px-3 py-2 rounded-lg focus:outline-none">
                                </div>
                                <div>
                                    <label for="endTime" class="block text-xs font-medium text-gray-600 mb-1">End Time</label>
                                    <input type="time" id="endTime" name="endTime" required
                                           class="input-field px-3 py-2 rounded-lg focus:outline-none">
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="date" class="block text-sm font-semibold text-gray-700 mb-2">Date</label>
                            <input type="date" id="date" name="date" required
                                   class="input-field px-4 py-3 rounded-lg focus:outline-none">
                        </div>
                    </div>
                    
                    <!-- Client Name and Company Name -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="clientName" class="block text-sm font-semibold text-gray-700 mb-2">Client Name</label>
                            <input type="text" id="clientName" name="clientName"
                                   placeholder="Enter client name"
                                   class="input-field px-4 py-3 rounded-lg focus:outline-none">
                        </div>
                        <div>
                            <label for="companyName" class="block text-sm font-semibold text-gray-700 mb-2">Company Name</label>
                            <input type="text" id="companyName" name="companyName"
                                   placeholder="Enter company name"
                                   class="input-field px-4 py-3 rounded-lg focus:outline-none">
                        </div>
                    </div>
                    
                    <!-- Region -->
                    <div>
                        <label for="region" class="block text-sm font-semibold text-gray-700 mb-2">Region</label>
                        <select id="region" name="region" required
                                class="input-field px-4 py-3 rounded-lg focus:outline-none">
                            <option value="">Select a region</option>
                            <option value="Hong Kong">Hong Kong</option>
                            <option value="Osaka">Osaka</option>
                            <option value="Tokyo">Tokyo</option>
                            <option value="Melbourne">Melbourne</option>
                            <option value="Sydney">Sydney</option>
                            <option value="Singapore">Singapore</option>
                            <option value="Philippines">Philippines</option>
                            <option value="Kuala Lumpur">Kuala Lumpur</option>
                            <option value="Ho Chi Minh City">Ho Chi Minh City</option>
                        </select>
                    </div>
                    
                    <!-- Event Name -->
                    <div>
                        <label for="eventName" class="block text-sm font-semibold text-gray-700 mb-2">Event Name</label>
                        <input type="text" id="eventName" name="eventName" required
                               placeholder="Enter event name"
                               class="input-field px-4 py-3 rounded-lg focus:outline-none">
                    </div>
                    
                    <!-- Reception -->
                    <div>
                        <label for="reception" class="block text-sm font-semibold text-gray-700 mb-2">Reception (Optional)</label>
                        <select id="reception" name="reception"
                                class="input-field px-4 py-3 rounded-lg focus:outline-none">
                            <option value="">Select Reception</option>
                            <option value="HKGWOC027@compassoffices.com">HKGWOC027</option>
                            <option value="HKGIP020@compassoffices.com">HKGIP020</option>
                            <option value="HKGCHB019@compassoffices.com">HKGCHB019</option>
                            <option value="hkgbodg012@compassoffices.com">HKGBODG012</option>
                            <option value="HKG1ADC015@compassoffices.com">HKG1ADC015</option>
                            <option value="HKG2ADC011@compassoffices.com">HKG2ADC011</option>
                            <option value="HKGLG011@compassoffices.com">HKGLG011</option>
                            <option value="HKG2LG016@compassoffices.com">HKG2LG016</option>
                            <option value="HKGAIA043@compassoffices.com">HKGAIA043</option>
                            <option value="HKG2SC017@compassoffices.com">HKG2SC017</option>
                            <option value="TYOEBS006@compassoffices.com">TYOEBS006</option>
                            <option value="TYO40MT007@compassoffices.com">TYO40MT007</option>
                            <option value="OSAING010@compassoffices.com">OSAING010</option>
                            <option value="SINSHC029@compassoffices.com">SINSHC029</option>
                            <option value="SINSLT030@compassoffices.com">SINSLT030</option>
                            <option value="MEL360C026@compassoffices.com">MEL360C026</option>
                            <option value="MEL459C021@compassoffices.com">MEL459C021</option>
                            <option value="MEL570B024@compassoffices.com">MEL570B024</option>
                            <option value="SYD141W012@compassoffices.com">SYD141W012</option>
                            <option value="SYD207K021@compassoffices.com">SYD207K021</option>
                            <option value="SYD9CAS017@compassoffices.com">SYD9CAS017</option>
                            <option value="MNLART009@compassoffices.com">MNLART009</option>
                            <option value="MNLAYA016@compassoffices.com">MNLAYA016</option>
                            <option value="MNLBGC024@compassoffices.com">MNLBGC024</option>
                            <option value="SGNLM81072@compassoffices.com">SGNLM81072</option>
                            <option value="SGNBFT046@compassoffices.com">SGNBFT046</option>
                            <option value="KULMSC003@compassoffices.com">KULMSC003</option>
                            <option value="jpsales@compassoffices.com">JPSALES (ouno八重洲)</option>
                            <option value="jpsales@compassoffices.com">JPSALES (WTC annex)</option>
                        </select>
                    </div>
                    
                    <!-- Location -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-4">Location</label>
                        
                        <!-- Country Selection -->
                        <div class="mb-4">
                            <label for="country" class="block text-xs font-medium text-gray-600 mb-2">Country</label>
                            <select id="country" name="country" required
                                    class="input-field px-4 py-3 rounded-lg focus:outline-none">
                                <option value="">Select Country</option>
                                <option value="Hong Kong">Hong Kong</option>
                                <option value="Osaka">Osaka</option>
                                <option value="Tokyo">Tokyo</option>
                                <option value="Melbourne">Melbourne</option>
                                <option value="Sydney">Sydney</option>
                                <option value="Singapore">Singapore</option>
                                <option value="Philippines">Philippines</option>
                                <option value="Kuala Lumpur">Kuala Lumpur</option>
                                <option value="Ho Chi Minh City">Ho Chi Minh City</option>
                            </select>
                        </div>
                        
                        <!-- Building Selection -->
                        <div class="mb-4">
                            <label for="building" class="block text-xs font-medium text-gray-600 mb-2">Building</label>
                            <select id="building" name="building" required
                                    class="input-field px-4 py-3 rounded-lg focus:outline-none" disabled>
                                <option value="">Select Building</option>
                            </select>
                        </div>
                        
                        <!-- Floor Selection -->
                        <div class="mb-4">
                            <label for="floor" class="block text-xs font-medium text-gray-600 mb-2">Floor</label>
                            <select id="floor" name="floor" required
                                    class="input-field px-4 py-3 rounded-lg focus:outline-none" disabled>
                                <option value="">Select Floor</option>
                            </select>
                        </div>
                        
                        <!-- Area Type Selection -->
                        <div class="mb-4">
                            <label class="block text-xs font-medium text-gray-600 mb-2">Area Type</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="loungeArea" name="areaTypes" value="Lounge area" 
                                           class="mr-2 text-orange-500 focus:ring-orange-500">
                                    <span class="text-sm">Lounge area</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="meetingRoom" name="areaTypes" value="meeting-room"
                                           class="mr-2 text-orange-500 focus:ring-orange-500">
                                    <span class="text-sm">Meeting room</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="room" name="areaTypes" value="room"
                                           class="mr-2 text-orange-500 focus:ring-orange-500">
                                    <span class="text-sm">Room</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Room Name Inputs -->
                        <div class="mb-4" id="roomNameSection" style="display: none;">
                            <div id="regularRoomInput" style="display: none;" class="mb-3">
                                <label for="regularRoomName" class="block text-xs font-medium text-gray-600 mb-2">Room Name</label>
                                <input type="text" id="regularRoomName" name="regularRoomName"
                                       placeholder="Enter room name (e.g., 1826)"
                                       class="input-field px-4 py-3 rounded-lg focus:outline-none">
                            </div>
                            <div id="meetingRoomInput" style="display: none;">
                                <label for="meetingRoomName" class="block text-xs font-medium text-gray-600 mb-2">Meeting Room Name</label>
                                <input type="text" id="meetingRoomName" name="meetingRoomName"
                                       placeholder="Enter meeting room name (e.g., ABC)"
                                       class="input-field px-4 py-3 rounded-lg focus:outline-none">
                            </div>
                        </div>
                        
                        <!-- Additional Location Input -->
                        <div class="mb-4">
                            <label for="additionalLocation" class="block text-xs font-medium text-gray-600 mb-2">Additional Location (Optional)</label>
                            <input type="text" id="additionalLocation" name="additionalLocation"
                                   placeholder="Enter additional location details"
                                   class="input-field px-4 py-3 rounded-lg focus:outline-none">
                        </div>
                        
                        <!-- Generated Location Preview -->
                        <div class="mt-4 p-3 bg-gray-50 rounded-lg border">
                            <label class="block text-xs font-medium text-gray-600 mb-1">Location Preview:</label>
                            <div id="locationPreview" class="text-sm font-medium text-gray-800">Please select location details above</div>
                        </div>
                    </div>
                    
                    <!-- Details -->
                    <div>
                        <label for="details" class="block text-sm font-semibold text-gray-700 mb-2">Details</label>
                        <textarea id="details" name="details" rows="4"
                                  placeholder="Enter additional event details..."
                                  class="input-field px-4 py-3 rounded-lg focus:outline-none resize-none"></textarea>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="pt-4">
                        <button type="submit" 
                                class="submit-btn w-full py-4 px-6 text-white font-semibold rounded-lg focus:outline-none focus:ring-4 focus:ring-purple-200">
                            <span id="submitText">Submit Event Data</span>
                            <span id="loadingText" class="hidden">Sending...</span>
                        </button>
                    </div>
                </form>
                
                <!-- Success/Error Messages -->
                <div id="successMessage" class="hidden mt-6 p-4 rounded-lg text-white success-message">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        Event data submitted successfully!
                    </div>
                </div>
                
                <div id="errorMessage" class="hidden mt-6 p-4 rounded-lg text-white error-message">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </svg>
                        <span id="errorText">There was an error submitting the form. Please try again.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Location data structure
        const locationData = {
            "Hong Kong": {
                "Wing On Centre": ["27"],
                "Infinitus Plaza": ["12", "20", "29", "35", "38"],
                "China Building": ["18", "19"],
                "Bank of Dongguan Tower": ["9", "10", "11", "12"],
                "Admiralty Centre Tower 1": ["15"],
                "Admiralty Centre Tower 2": ["8", "11"],
                "Lee Garden One": ["24"],
                "Lee Garden Two": ["15", "16", "28"],
                "AIA Tower": ["43"],
                "Silvercord Tower 2": ["5", "11", "17"]
            },
            "Tokyo": {
                "Ebisu Green Glass": ["6", "7", "8", "9"],
                "Toranomon 40 MT": ["7"],
                "ouno八重洲 x Compass Offices": ["3"]
            },
            "Osaka": {
                "INOGATE Osaka": ["9", "10"],
                "WTC annex": ["11", "12"]
            },
            "Singapore": {
                "Samsung Hub": ["29"],
                "Singapore Land Tower": ["19", "30"]
            },
            "Melbourne": {
                "360 Collins Street": ["26"],
                "459 Collins Street": ["21"],
                "570 Bourke Street": ["17", "24"]
            },
            "Sydney": {
                "141 Walker Street": ["12"],
                "207 Kent Street": ["21"],
                "9 Castlereagh Street": ["16", "17"]
            },
            "Philippines": {
                "Arthaland Century Pacific Tower": ["9"],
                "Tower 6789": ["16"],
                "BGC Corporate Center": ["24"]
            },
            "Ho Chi Minh City": {
                "Compass Offices Landmark 81": ["72"],
                "Bitexco Financial Tower": ["16", "46", "56"]
            },
            "Kuala Lumpur": {
                "Menara AIA Sentral": ["3", "4", "5"]
            }
        };
        
        // Initialize form interactions
        document.addEventListener('DOMContentLoaded', function() {
            const countrySelect = document.getElementById('country');
            const buildingSelect = document.getElementById('building');
            const floorSelect = document.getElementById('floor');
            const roomNameSection = document.getElementById('roomNameSection');
            const locationPreview = document.getElementById('locationPreview');
            
            // Country change handler
            countrySelect.addEventListener('change', function() {
                const selectedCountry = this.value;
                buildingSelect.innerHTML = '<option value="">Select Building</option>';
                floorSelect.innerHTML = '<option value="">Select Floor</option>';
                
                if (selectedCountry && locationData[selectedCountry]) {
                    buildingSelect.disabled = false;
                    Object.keys(locationData[selectedCountry]).forEach(building => {
                        const option = document.createElement('option');
                        option.value = building;
                        option.textContent = building;
                        buildingSelect.appendChild(option);
                    });
                } else {
                    buildingSelect.disabled = true;
                    floorSelect.disabled = true;
                }
                updateLocationPreview();
            });
            
            // Building change handler
            buildingSelect.addEventListener('change', function() {
                const selectedCountry = countrySelect.value;
                const selectedBuilding = this.value;
                floorSelect.innerHTML = '<option value="">Select Floor</option>';
                
                if (selectedBuilding && locationData[selectedCountry] && locationData[selectedCountry][selectedBuilding]) {
                    floorSelect.disabled = false;
                    locationData[selectedCountry][selectedBuilding].forEach(floor => {
                        const option = document.createElement('option');
                        option.value = floor;
                        option.textContent = floor + 'F';
                        floorSelect.appendChild(option);
                    });
                } else {
                    floorSelect.disabled = true;
                }
                updateLocationPreview();
            });
            
            // Floor change handler
            floorSelect.addEventListener('change', updateLocationPreview);
            
            // Area type change handlers
            document.getElementById('meetingRoom').addEventListener('change', function() {
                updateRoomInputVisibility();
                updateLocationPreview();
            });
            
            document.getElementById('room').addEventListener('change', function() {
                updateRoomInputVisibility();
                updateLocationPreview();
            });
            
            document.getElementById('loungeArea').addEventListener('change', updateLocationPreview);
            document.getElementById('regularRoomName').addEventListener('input', updateLocationPreview);
            document.getElementById('meetingRoomName').addEventListener('input', updateLocationPreview);
            document.getElementById('additionalLocation').addEventListener('input', updateLocationPreview);
            
            function updateRoomInputVisibility() {
                const meetingRoomChecked = document.getElementById('meetingRoom').checked;
                const roomChecked = document.getElementById('room').checked;
                const roomNameSection = document.getElementById('roomNameSection');
                const regularRoomInput = document.getElementById('regularRoomInput');
                const meetingRoomInput = document.getElementById('meetingRoomInput');
                
                if (meetingRoomChecked || roomChecked) {
                    roomNameSection.style.display = 'block';
                    regularRoomInput.style.display = roomChecked ? 'block' : 'none';
                    meetingRoomInput.style.display = meetingRoomChecked ? 'block' : 'none';
                } else {
                    roomNameSection.style.display = 'none';
                }
            }
            
            function updateLocationPreview() {
                const building = buildingSelect.value;
                const floor = floorSelect.value;
                const loungeArea = document.getElementById('loungeArea').checked;
                const meetingRoom = document.getElementById('meetingRoom').checked;
                const room = document.getElementById('room').checked;
                const regularRoomName = document.getElementById('regularRoomName').value;
                const meetingRoomName = document.getElementById('meetingRoomName').value;
                const additionalLocation = document.getElementById('additionalLocation').value;
                
                let preview = '';
                
                if (building && floor) {
                    // Format building name
                    let buildingName = building;
                    if (building === 'Lee Garden Two') buildingName = 'Lee Garden 2';
                    if (building === 'Lee Garden One') buildingName = 'Lee Garden 1';
                    
                    preview = `${buildingName}, ${floor}/F`;
                    
                    // Build location parts array
                    const locationParts = [];
                    
                    // Add room if selected
                    if (room) {
                        if (regularRoomName) {
                            locationParts.push(`Room ${regularRoomName}`);
                        } else {
                            locationParts.push('Room');
                        }
                    }
                    
                    // Add meeting room if selected
                    if (meetingRoom) {
                        if (meetingRoomName) {
                            locationParts.push(`Meeting room (${meetingRoomName})`);
                        } else {
                            locationParts.push('Meeting room');
                        }
                    }
                    
                    // Add lounge area if selected
                    if (loungeArea) {
                        locationParts.push('Lounge area');
                    }
                    
                    // Join all parts with " + "
                    if (locationParts.length > 0) {
                        preview += `, ${locationParts.join(' + ')}`;
                    }
                    
                    // Add additional location if provided and no area types selected
                    if (locationParts.length === 0 && additionalLocation) {
                        preview += `, ${additionalLocation}`;
                    }
                    // Add additional location in parentheses if area types are selected
                    else if (locationParts.length > 0 && additionalLocation) {
                        preview += ` (${additionalLocation})`;
                    }
                } else {
                    preview = 'Please select location details above';
                }
                
                locationPreview.textContent = preview;
            }
        });
        
        // Function to convert 24-hour time to 12-hour format with AM/PM
        function formatTimeTo12Hour(time) {
            if (!time) return '';
            const [hours, minutes] = time.split(':');
            const hour = parseInt(hours, 10);
            const period = hour >= 12 ? 'PM' : 'AM';
            const hour12 = hour % 12 || 12;
            return `${hour12}:${minutes} ${period}`;
        }

        document.getElementById('eventForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const submitText = document.getElementById('submitText');
            const loadingText = document.getElementById('loadingText');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Hide previous messages
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');
            
            // Show loading state
            submitText.classList.add('hidden');
            loadingText.classList.remove('hidden');
            submitBtn.disabled = true;
            
            // Collect area types
            const areaTypes = [];
            if (document.getElementById('loungeArea').checked) areaTypes.push('Lounge area');
            if (document.getElementById('meetingRoom').checked) areaTypes.push('Meeting room');
            if (document.getElementById('room').checked) areaTypes.push('Room');
            
            // Collect form data
            const clientName = document.getElementById('clientName').value;
            const companyName = document.getElementById('companyName').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;

            // Format clientName based on input
            let formattedClientName = '';
            if (companyName && clientName) {
                formattedClientName = `${companyName} (Client name: ${clientName})`;
            } else if (companyName) {
                formattedClientName = companyName;
            } else if (clientName) {
                formattedClientName = clientName;
            } else {
                formattedClientName = '';
            }

            const formData = {
                startTime: formatTimeTo12Hour(startTime),
                endTime: formatTimeTo12Hour(endTime),
                date: document.getElementById('date').value,
                clientName: formattedClientName,
                region: document.getElementById('region').value,
                eventName: document.getElementById('eventName').value,
                reception: document.getElementById('reception').value,
                location: {
                    country: document.getElementById('country').value,
                    building: document.getElementById('building').value,
                    floor: document.getElementById('floor').value,
                    areaTypes: areaTypes,
                    regularRoomName: document.getElementById('regularRoomName').value,
                    meetingRoomName: document.getElementById('meetingRoomName').value,
                    additionalLocation: document.getElementById('additionalLocation').value,
                    formattedLocation: document.getElementById('locationPreview').textContent
                },
                details: document.getElementById('details').value
            };
            
            try {
                const response = await fetch('https://hook.eu2.make.com/qd7i7rs3unmvx2hc1cu9el17og5ws84d', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    successMessage.classList.remove('hidden');
                    document.getElementById('eventForm').reset();
                    // Reset location preview
                    document.getElementById('locationPreview').textContent = 'Please select location details above';
                    // Reset disabled states
                    document.getElementById('building').disabled = true;
                    document.getElementById('floor').disabled = true;
                    document.getElementById('roomNameSection').style.display = 'none';
                    document.getElementById('regularRoomInput').style.display = 'none';
                    document.getElementById('meetingRoomInput').style.display = 'none';
                } else {
                    throw new Error('Network response was not ok');
                }
            } catch (error) {
                console.error('Error:', error);
                errorMessage.classList.remove('hidden');
            } finally {
                // Reset button state
                submitText.classList.remove('hidden');
                loadingText.classList.add('hidden');
                submitBtn.disabled = false;
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98e08a3231a409bc',t:'MTc2MDM3NjM2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
